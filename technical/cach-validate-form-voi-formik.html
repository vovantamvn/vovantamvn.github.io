<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Cách vaidate form với formik trong React</title>
  <meta name="description" content="Formik là một thư viện được tạo ra để giúp chúng ta có thể làm việc với form một cách dễ dàng và hiệu quả hơn. Theo cá nhân mình thấy thì sử dụng formik còn ...">
  
  <link rel="shortcut icon" type="image/png" href="/assets/images/photo.jpg">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://vovantamvn.github.io/technical/cach-validate-form-voi-formik.html">
  <link rel="alternate" type="application/rss+xml" title="Tâm's Blog" href="https://vovantamvn.github.io/feed.xml">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-M0EM3PWHD1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-M0EM3PWHD1');
  </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Tâm's Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Cách vaidate form với formik trong React</h1>
    <p class="post-meta"><time datetime="2021-05-11T00:00:00+00:00" itemprop="datePublished">May 11, 2021</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Formik là một thư viện được tạo ra để giúp chúng ta có thể làm việc với form một cách dễ dàng và hiệu quả hơn. Theo cá nhân mình thấy thì sử dụng formik còn giúp chúng ta viết các đoạn code ngắn gọn hơn. Việc chia tách phần validate ra riêng cũng giúp code chúng ta dễ hiểu.</p>

<h2 id="formik-là-gì">Formik là gì</h2>

<p><a href="https://github.com/formium/formik">Formik</a> là một thư viện được tạo ra để giúp chúng ta có thể làm việc với form một cách dễ dàng và hiệu quả hơn. Theo cá nhân mình thấy thì sử dụng formik còn giúp chúng ta viết các đoạn code ngắn gọn hơn. Việc chia tách phần validate ra riêng cũng giúp code chúng ta dễ hiểu.</p>

<h2 id="demo">Demo</h2>

<p>Dưới đây mình sẽ hướng dẫn các bạn validate một form đơn giản chỉ chứa trường phone.</p>

<p>Tạo project bằng lệnh <code class="language-plaintext highlighter-rouge">npx create-react-app app</code></p>

<p>Tiếp theo chúng ta cài đặt formit <code class="language-plaintext highlighter-rouge">npm install formik</code></p>

<p>Trong file App.js chúng ta có như sau:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useFormik</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">formik</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">formik</span> <span class="o">=</span> <span class="nx">useFormik</span><span class="p">({</span>
    <span class="na">initialValues</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">phone</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">validate</span><span class="p">:</span> <span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">validate</span><span class="dl">'</span><span class="p">,</span> <span class="nx">values</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">phone</span> <span class="o">===</span> <span class="dl">''</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">phone</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Phone can't empty</span><span class="dl">"</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="sr">/^</span><span class="se">[</span><span class="sr">0-9</span><span class="se">]{10}</span><span class="sr">$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">phone</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">phone</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Phone invalid</span><span class="dl">'</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">errors</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">onSubmit</span><span class="p">:</span> <span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">You are submit</span><span class="dl">'</span><span class="p">,</span> <span class="nx">values</span><span class="p">);</span>
    <span class="p">},</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">formik</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">phone_id</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Phone</span> <span class="nx">number</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span>
          <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">phone_id</span><span class="dl">"</span>
          <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">phone</span><span class="dl">"</span>
          <span class="nx">values</span><span class="o">=</span><span class="p">{</span><span class="nx">formik</span><span class="p">.</span><span class="nx">values</span><span class="p">.</span><span class="nx">phone</span><span class="p">}</span>
          <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">formik</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">p</span> <span class="nx">style</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">formik</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">phone</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="dl">"</span><span class="s2">Submit</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div></div>

<p>Bạn để ý sẽ có 3 tham số bạn cần quan tâm:</p>

<ul>
  <li>initialValues</li>
  <li>validate</li>
  <li>onSubmit</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">initialValues</code> là object chứa các giá trị khởi tạo ban đầu cho form của chúng ta, ở đây mình khởi tạo với giá trị rỗng.</p>

<p><code class="language-plaintext highlighter-rouge">validate</code> chính là function mà chúng ta sẽ triển khai kiểm tra dữ liệu, như bạn thấy ở trên function này sẽ trả về đối tượng errors mà chúng ta sẽ dùng để show lỗi trong thẻ <code class="language-plaintext highlighter-rouge">p</code>.</p>

<p><code class="language-plaintext highlighter-rouge">onSubmit</code> là function sẽ được gọi nếu chúng ta submit, đương nhiên là dữ liệu đã phải được validate thành công rồi mới được gọi nha :))</p>

<p><code class="language-plaintext highlighter-rouge">formik.handleChange</code> là function mà formik tự cập nhật các giá trị của field sau đó gọi hàm <code class="language-plaintext highlighter-rouge">validate</code>, rất tiện lợi phải không nào. Có một lưu ý là trong thẻ input bạn phải để <code class="language-plaintext highlighter-rouge">name</code> giống với tên field bạn khởi tạo trong <code class="language-plaintext highlighter-rouge">initialValues</code> (trường hợp của mình là phone).</p>

<p><code class="language-plaintext highlighter-rouge">formik.handleSubmit</code> là function sẽ được gọi khi bạn nhấn nút submit. Nếu validate thành công thì function <code class="language-plaintext highlighter-rouge">onSubmit</code> sẽ được gọi.</p>

<p><code class="language-plaintext highlighter-rouge">formik.values</code> chứa tất cả các field trong from của bạn.</p>

<p><code class="language-plaintext highlighter-rouge">formik.errors</code> chứa tất cả các lỗi trong quá trình validate.</p>

<p>Bạn có thể xem source code của mình <a href="https://github.com/vovantamvn/demo-formik">tại đây</a>. Nếu bạn muốn tìm hiểu nhiều hơn thì có thể vào tài liệu của <a href="https://formik.org/docs/overview">formik</a>.</p>

<p>Cảm ơn các bạn đã theo dõi!</p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Tâm's Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Tâm's Blog</li>
          <li><a href="mailto:vovantam.dev@gmail.com">vovantam.dev@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://gitlab.com/vovantamvn"><span class="icon icon--gitlab"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M15.97 9.058l-.895-2.756L13.3.842c-.09-.282-.488-.282-.58 0L10.946 6.3H5.054L3.28.842C3.188.56 2.79.56 2.7.84L.924 6.3.03 9.058c-.082.25.008.526.22.682L8 15.37l7.75-5.63c.212-.156.302-.43.22-.682"/></svg>
</span><span class="username">vovantamvn</span></a>

          </li>
          

          
          <li>
            <a href="https://github.com/vovantamvn"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">vovantamvn</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Ghi lại những gì đã học được là sở thích của mình.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
